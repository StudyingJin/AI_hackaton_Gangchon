<!DOCTYPE html>
<html lang="ko">

<head>
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700" />
  <title>Galileo Design</title>
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>

<body>
  <div class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden"
    style="font-family: 'Space Grotesk', 'Noto Sans', sans-serif;">
    <div class="layout-container flex h-full grow flex-col">
      <header
        class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f0f5f4] px-10 py-3">
        <div class="flex items-center gap-4 text-[#101817]">
          <div class="size-4">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z" fill="currentColor"></path>
            </svg>
          </div>
          <h2 class="text-[#101817] text-lg font-bold leading-tight tracking-[-0.015em]">
            같이가요~
          </h2>
        </div>
        <div class="flex flex-1 justify-end gap-8">
          <div class="flex gap-2">
            <button
              class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f0f5f4] text-[#101817] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5"
              style="background-image: url('../static/image/hgear.jpg');">
              <div class="text-[#101817]" data-icon="Gear" data-size="20px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor"
                  viewBox="0 0 256 256">
                  <path d="..."></path>
                </svg>
              </div>
            </button>
            <button
              class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f0f5f4] text-[#101817] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5"
              style="background-image: url('../static/image/hq.jpg');">
              <div class="text-[#101817]" data-icon="Question" data-size="20px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor"
                  viewBox="0 0 256 256">
                  <path d="..."></path>
                </svg>
              </div>
            </button>
          </div>
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
            style="background-image: url('../static/image/hUSER.jpg');"></div>
        </div>
      </header>

      <div class="px-40 flex flex-1 justify-center py-5">
        <div class="layout-content-container flex flex-col w-[512px] max-w-[512px] py-5 max-w-[960px] flex-1">
          <h2 class="text-[#101817] tracking-light text-xl font-bold leading-tight px-4 text-center pb-3 pt-5">
            "같이가요"
          </h2>
          <div id="message-container" class="flex flex-col gap-3 p-4"></div>

          <div class="flex items-center px-4 py-3 gap-3 @container">
            <label class="flex flex-col min-w-40 h-12 flex-1">
              <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
                <input id="chat-input" placeholder="손주한테 물어보세요!"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#101817] focus:outline-0 focus:ring-0 border-none bg-[#f0f5f4] focus:border-none h-full placeholder:text-[#5e8d86] px-4 rounded-r-none border-r-0 pr-2 text-base font-normal leading-normal" />
                <div
                  class="flex border-none bg-[#f0f5f4] items-center justify-center pr-4 rounded-r-xl border-l-0 !pr-2">
                  <button id="send-button" class="flex items-center justify-center p-1.5 gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                      viewBox="0 0 256 256">
                      <path
                        d="M227.07,122.29l-192-80A16,16,0,0,0,9.39,73.64L31.43,128H128v48a8,8,0,0,0,16,0V128h80v48a8,8,0,0,0,16,0V128h10.93a16,16,0,0,0,6.14-30.71ZM33.72,112,16.53,73.64l192,80H128v32H128V128Z">
                      </path>
                    </svg>
                    <button id="mic-button" class="flex items-center justify-center p-1.5 gap-2">
                      <svg width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                        <path
                          d="M128,24A32,32,0,0,0,96,56v72a32,32,0,0,0,64,0V56A32,32,0,0,0,128,24ZM128,152a24,24,0,0,1-24-24V56a24,24,0,0,1,48,0v72A24,24,0,0,1,128,152Z">
                        </path>
                        <path
                          d="M176,128a8,8,0,0,0-8,8,40,40,0,0,1-80,0,8,8,0,0,0-16,0,56.06,56.06,0,0,0,48,55.42V208H104a8,8,0,0,0,0,16h48a8,8,0,0,0,0-16H144V191.42A56.06,56.06,0,0,0,192,136,8,8,0,0,0,176,128Z">
                        </path>
                      </svg>
                    </button>
                    <span>답장하기</span>
                  </button>
                </div>
              </div>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
  <script>
    // Mic and speech recognition functionality
    const micButton = document.getElementById('mic-button');
    const chatInput = document.getElementById('chat-input');

    let recognition;
    let recognizing = false;

    if ('webkitSpeechRecognition' in window) {
      recognition = new webkitSpeechRecognition();
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.lang = 'ko-KR';

      recognition.onstart = () => {
        recognizing = true;
        micButton.innerHTML = `<span>음성 입력 중...</span>`;
      };

      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        chatInput.value = transcript; // Set the recognized text into the input field
      };

      recognition.onerror = (event) => {
        console.error('Speech recognition error:', event.error);
      };

      recognition.onend = () => {
        recognizing = false;
        micButton.innerHTML = `<span>음성 입력</span>`;

      };
    }

    micButton.addEventListener('click', () => {
      if (recognizing) {
        recognition.stop();
      } else {
        recognition.start();
      }
    })
  </script>
</body>

</html>